- name: Demo on using register and Shell Module
  hosts: all
  tasks:
   - name: Demo on using Shell Module 
     ansible.builtin.shell: uptime 
     register: OUT
   
   - name: Printing the Shell Output using OUT Variable
     ansible.builtin.debug:
      msg: "{{OUT.stdout}}"

   - name: printing the exit code of the UPTIME command
     ansible.builtin.set_fact:
      STATUS_CODE: "{{OUT.rc}}"

   - name: Printing uptime exit code 
     ansible.builtin.debug:
      msg: "{{OUT.rc}}"